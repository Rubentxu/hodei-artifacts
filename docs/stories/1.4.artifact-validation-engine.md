# Story 1.4: Motor de Validaci√≥n de Artefactos

## Status

Draft

## Story

**As a** Repository Administrator,
**I want** to define and enforce validation rules for incoming artifacts,
**so that** only compliant and well-formed artifacts are accepted into a repository.

## Acceptance Criteria

1. The system must provide a framework for defining validation rules.
2. Rules can be based on artifact type, size, metadata, or content.
3. Example rules: "Block JAR files that are not signed", "Reject NPM packages with no license field".
4. The validation engine must be triggered before an artifact is fully committed to storage.
5. If validation fails, the upload must be rejected with a clear error message.
6. An `ArtifactValidationFailed` event must be published on failure.
7. Validation rules should be configurable per repository.

## Tasks / Subtasks

- [ ] Design a validation rule trait/interface.
- [ ] Implement a validation engine service.
- [ ] Implement a rule for checking digital signatures on JAR files.
- [ ] Implement a rule for checking for a license in `package.json`.
- [ ] Integrate the validation engine into the artifact upload workflow.
- [ ] Persist validation rule configurations per repository.
- [ ] Publish `ArtifactValidationFailed` event.

## Dev Notes

### API Specifications
- The `POST /artifacts` endpoint will now invoke the validation engine.
- A 400 Bad Request response with a descriptive error message should be returned for validation failures.