# Story 1.19: Notificaciones Webhook de Subida

## Status

Draft

## Story

**As a** System Integrator,
**I want** to configure webhooks that are triggered upon successful artifact uploads,
**so that** I can build custom, event-driven integrations with external systems like chat applications or custom deployment scripts.

## Acceptance Criteria

1. The system must allow administrators to configure webhooks on a per-repository or global basis.
2. A webhook configuration must include a target URL and an optional secret for payload signing.
3. When an `ArtifactUploaded` event occurs, the system should trigger any matching webhooks.
4. The system must send an HTTP POST request to the target URL with a JSON payload containing details about the uploaded artifact.
5. The payload should be signed (e.g., using HMAC-SHA256) with the configured secret to ensure authenticity.
6. The system must handle webhook delivery failures with a retry mechanism (e.g., exponential backoff).
7. Delivery successes and failures should be logged for troubleshooting.

## Tasks / Subtasks

- [ ] Design the data model for storing webhook configurations.
- [ ] Implement a service that listens for `ArtifactUploaded` events and triggers webhooks.
- [ ] Implement the HTTP client logic for sending webhook payloads, including signing and retries.
- [ ] Create API endpoints for managing webhook configurations (CRUD).
- [ ] Write integration tests for the webhook delivery and signature verification.

## Dev Notes

### Security
- Webhook secrets must be stored securely (encrypted at rest).
- The system must be protected from Server-Side Request Forgery (SSRF) attacks by validating target URLs.