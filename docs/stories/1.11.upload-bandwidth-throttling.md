# Story 1.11: Control de Ancho de Banda de Subida

## Status

Draft

## Story

**As a** System Administrator,
**I want** to configure bandwidth limits for artifact uploads,
**so that** I can prevent individual users or systems from monopolizing network resources and ensure fair usage for all.

## Acceptance Criteria

1. The system must allow setting global or per-user/per-repository upload bandwidth limits.
2. When a limit is active, the system must throttle the speed of incoming uploads to match the configured rate.
3. This should be implemented using a token bucket or similar algorithm for smooth throttling.
4. The throttling should be applied at the application level or at the API gateway/ingress level.
5. The system should log when an upload is being throttled.
6. Exceeding the limit should slow down the connection, not terminate it, unless configured to do so.

## Tasks / Subtasks

- [ ] Choose a throttling strategy and library (e.g., `governor`).
- [ ] Implement middleware in Axum to apply the throttling logic.
- [ ] Design a configuration model for storing throttling rules.
- [ ] Implement the logic to apply rules based on user, IP, or repository.
- [ ] Write tests to verify that bandwidth is correctly limited.

## Dev Notes

### Technical Constraints
- Throttling must be efficient and not introduce significant CPU overhead.
- The configuration should be dynamically reloadable without restarting the server.