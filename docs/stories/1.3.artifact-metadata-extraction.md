# Story 1.3: Extracci√≥n de Metadatos del Artefacto

## Status

Draft

## Story

**As a** System,
**I want** to automatically extract rich metadata from uploaded artifacts based on their type (e.g., from `pom.xml` for Maven, `package.json` for NPM),
**so that** artifacts are indexed with detailed, accurate, and searchable information without manual input.

## Acceptance Criteria

1. The system must identify the artifact's ecosystem (Maven, NPM, etc.) after upload.
2. Based on the ecosystem, it must look for and parse specific metadata files (e.g., `pom.xml`, `package.json`).
3. Extracted metadata (dependencies, licenses, description, etc.) must be saved to the `PackageVersion` model in MongoDB.
4. The process must be extensible to support new package types in the future.
5. If a metadata file is malformed, the upload should not fail, but a warning should be logged.
6. An `ArtifactMetadataEnriched` event should be published after successful extraction.

## Tasks / Subtasks

- [ ] Implement a metadata extraction service that is triggered by an `ArtifactUploaded` event.
- [ ] Create parsers for `pom.xml` (Maven).
- [ ] Create parsers for `package.json` (NPM).
- [ ] Integrate parsers into the extraction service.
- [ ] Update the `PackageVersion` repository to allow updating the metadata field.
- [ ] Implement the `ArtifactMetadataEnriched` event publisher.
- [ ] Write unit tests for each parser.

## Dev Notes

### Data Models
- `PackageVersion.metadata`: This will be populated by this feature.
- `PackageVersion.dependencies`: This will be populated by this feature.

### Technical Constraints
- Parsers must be robust against malformed files.
- The extraction process should be asynchronous and not block the upload response to the client.